{"remainingRequest":"/Users/martadom/Desktop/TFM/test/node_modules/babel-loader/lib/index.js!/Users/martadom/Desktop/TFM/test/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/martadom/Desktop/TFM/test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/martadom/Desktop/TFM/test/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/martadom/Desktop/TFM/test/src/views/Login.vue","mtime":1693494846482},{"path":"/Users/martadom/Desktop/TFM/test/babel.config.js","mtime":1689868462000},{"path":"/Users/martadom/Desktop/TFM/test/node_modules/cache-loader/dist/cjs.js","mtime":1688895642525},{"path":"/Users/martadom/Desktop/TFM/test/node_modules/babel-loader/lib/index.js","mtime":1688895642501},{"path":"/Users/martadom/Desktop/TFM/test/node_modules/cache-loader/dist/cjs.js","mtime":1688895642525},{"path":"/Users/martadom/Desktop/TFM/test/node_modules/vue-loader/lib/index.js","mtime":1688895654604}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG9iamVjdC1jdXJseS1uZXdsaW5lCmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ0Bjb3JlL3V0aWxzJzsKaW1wb3J0IHsgZW1haWxWYWxpZGF0b3IsIHJlcXVpcmVkIH0gZnJvbSAnQGNvcmUvdXRpbHMvdmFsaWRhdGlvbic7CmltcG9ydCB7IG1kaUV5ZU9mZk91dGxpbmUsIG1kaUV5ZU91dGxpbmUgfSBmcm9tICdAbWRpL2pzJzsKaW1wb3J0IHRoZW1lQ29uZmlnIGZyb20gJ0B0aGVtZUNvbmZpZyc7CmltcG9ydCB7IGdldEN1cnJlbnRJbnN0YW5jZSwgcmVmIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknOwppbXBvcnQgeyB1dWlkIH0gZnJvbSAndnVlLXV1aWQnOwppbXBvcnQgeyBhdXRoLCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCB9IGZyb20gJy4uL2ZpcmViYXNlJzsKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwKCkgewogICAgLy8gVGVtcGxhdGUgUmVmCiAgICBjb25zdCBsb2dpbkZvcm0gPSByZWYobnVsbCk7CiAgICBjb25zdCB2bSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpLnByb3h5OwogICAgY29uc3QgewogICAgICByb3V0ZXIKICAgIH0gPSB1c2VSb3V0ZXIoKTsKICAgIGNvbnN0IGlzUGFzc3dvcmRWaXNpYmxlID0gcmVmKGZhbHNlKTsKICAgIGNvbnN0IGVtYWlsID0gcmVmKCcnKTsKICAgIGNvbnN0IHBhc3N3b3JkID0gcmVmKCcnKTsKICAgIGNvbnN0IGVycm9yTWVzc2FnZXMgPSByZWYoW10pOwoKICAgIGNvbnN0IGxvZ0luID0gYXN5bmMgKCkgPT4gewogICAgICAvLyBjb25zdCBpc0Zvcm1WYWxpZCA9IGxvZ2luRm9ybS52YWx1ZS52YWxpZGF0ZSgpCiAgICAgIC8vIGlmICghaXNGb3JtVmFsaWQpIHJldHVybgogICAgICBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbC52YWx1ZSwgcGFzc3dvcmQudmFsdWUpLnRoZW4odXNlciA9PiB7CiAgICAgICAgdmFyIF91c2VyJHVzZXI7CgogICAgICAgIC8vIFNldCB1c2VyJ3MgZGF0YSBpbiBsb2NhbFN0b3JhZ2UgZm9yIFVJL090aGVyIHB1cnBvc2UKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlckRhdGEnLCBKU09OLnN0cmluZ2lmeSh1c2VyKSk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJBYmlsaXR5JywgSlNPTi5zdHJpbmdpZnkoW3sKICAgICAgICAgIGFjdGlvbjogJ21hbmFnZScsCiAgICAgICAgICBzdWJqZWN0OiAnYWxsJwogICAgICAgIH1dKSk7CiAgICAgICAgY29uc3Qgc2Vzc2lvbklkID0gdXVpZC52MSgpOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZXNzaW9uSWQnLCBKU09OLnN0cmluZ2lmeShzZXNzaW9uSWQpKTsgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FjY2Vzc1Rva2VuJywgdG9rZW4pCiAgICAgICAgLy8gT24gc3VjY2VzcyByZWRpcmVjdCB0byBob21lCgogICAgICAgIGNvbnNvbGUubG9nKGBVc2VyIGxvZ2dlZCBpbjogJHtKU09OLnN0cmluZ2lmeSh1c2VyID09PSBudWxsIHx8IHVzZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdXNlciR1c2VyID0gdXNlci51c2VyKSA9PT0gbnVsbCB8fCBfdXNlciR1c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdXNlciR1c2VyLmVtYWlsKX1gKTsKICAgICAgICByb3V0ZXIucHVzaCgnL2hvbWUnKTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ09vcHMsIFVuYWJsZSB0byBsb2dpbiEnKTsKICAgICAgICBjb25zb2xlLmxvZygnZXJyb3IgOiAnLCBlcnJvcik7CiAgICAgIH0pOyAvLyBheGlvcwogICAgICAvLyAgIC5wb3N0KCcvYXV0aC9sb2dpbicsIHsgZW1haWw6IGVtYWlsLnZhbHVlLCBwYXNzd29yZDogcGFzc3dvcmQudmFsdWUgfSkKICAgICAgLy8gICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgIC8vICAgICBjb25zdCB7IGFjY2Vzc1Rva2VuIH0gPSByZXNwb25zZS5kYXRhCiAgICAgIC8vICAgICAvLyA/IFNldCBhY2Nlc3MgdG9rZW4gaW4gbG9jYWxTdG9yYWdlIHNvIGF4aW9zIGludGVyY2VwdG9yIGNhbiB1c2UgaXQKICAgICAgLy8gICAgIC8vIEF4aW9zIEludGVyY2VwdG9yczogaHR0cHM6Ly9naXRodWIuY29tL2F4aW9zL2F4aW9zI2ludGVyY2VwdG9ycwogICAgICAvLyAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FjY2Vzc1Rva2VuJywgYWNjZXNzVG9rZW4pCiAgICAgIC8vICAgICByZXR1cm4gcmVzcG9uc2UKICAgICAgLy8gICB9KQogICAgICAvLyAgIC50aGVuKCgpID0+IHsKICAgICAgLy8gICAgIGF4aW9zLmdldCgnL2F1dGgvbWUnKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgLy8gICAgICAgY29uc3QgeyB1c2VyIH0gPSByZXNwb25zZS5kYXRhCiAgICAgIC8vICAgICAgIGNvbnN0IHsgYWJpbGl0eTogdXNlckFiaWxpdHkgfSA9IHVzZXIKICAgICAgLy8gICAgICAgLy8gU2V0IHVzZXIgYWJpbGl0eQogICAgICAvLyAgICAgICAvLyA/IGh0dHBzOi8vY2FzbC5qcy5vcmcvdjUvZW4vZ3VpZGUvaW50cm8jdXBkYXRlLXJ1bGVzCiAgICAgIC8vICAgICAgIHZtLiRhYmlsaXR5LnVwZGF0ZSh1c2VyQWJpbGl0eSkKICAgICAgLy8gICAgICAgLy8gU2V0IHVzZXIncyBhYmlsaXR5IGluIGxvY2FsU3RvcmFnZSBmb3IgQWNjZXNzIENvbnRyb2wKICAgICAgLy8gICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJBYmlsaXR5JywgSlNPTi5zdHJpbmdpZnkodXNlckFiaWxpdHkpKQogICAgICAvLyAgICAgICAvLyBXZSB3aWxsIHN0b3JlIGB1c2VyQWJpbGl0eWAgaW4gbG9jYWxTdG9yYWdlIHNlcGFyYXRlIGZyb20gdXNlckRhdGEKICAgICAgLy8gICAgICAgLy8gSGVuY2UsIHdlIGFyZSBqdXN0IHJlbW92aW5nIGl0IGZyb20gdXNlciBvYmplY3QKICAgICAgLy8gICAgICAgZGVsZXRlIHVzZXIuYWJpbGl0eQogICAgICAvLyAgICAgICAvLyBTZXQgdXNlcidzIGRhdGEgaW4gbG9jYWxTdG9yYWdlIGZvciBVSS9PdGhlciBwdXJwb3NlCiAgICAgIC8vICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyRGF0YScsIEpTT04uc3RyaW5naWZ5KHVzZXIpKQogICAgICAvLyAgICAgICAvLyBPbiBzdWNjZXNzIHJlZGlyZWN0IHRvIGhvbWUKICAgICAgLy8gICAgICAgcm91dGVyLnB1c2goJy8nKQogICAgICAvLyAgICAgfSkKICAgICAgLy8gICB9KQogICAgICAvLyAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgIC8vICAgICAvLyBUT0RPOiBOZXh0IFVwZGF0ZSAtIFNob3cgbm90aWZpY2F0aW9uCiAgICAgIC8vICAgICBjb25zb2xlLmVycm9yKCdPb3BzLCBVbmFibGUgdG8gbG9naW4hJykKICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCdlcnJvciA6Pj4gJywgZXJyb3IucmVzcG9uc2UpCiAgICAgIC8vICAgICBlcnJvck1lc3NhZ2VzLnZhbHVlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcgogICAgICAvLyAgIH0pCiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIGxvZ0luLAogICAgICBpc1Bhc3N3b3JkVmlzaWJsZSwKICAgICAgZW1haWwsCiAgICAgIHBhc3N3b3JkLAogICAgICBlcnJvck1lc3NhZ2VzLAogICAgICBpY29uczogewogICAgICAgIG1kaUV5ZU91dGxpbmUsCiAgICAgICAgbWRpRXllT2ZmT3V0bGluZQogICAgICB9LAogICAgICB2YWxpZGF0b3JzOiB7CiAgICAgICAgcmVxdWlyZWQsCiAgICAgICAgZW1haWxWYWxpZGF0b3IKICAgICAgfSwKICAgICAgLy8gdGhlbWVDb25maWcKICAgICAgYXBwTmFtZTogdGhlbWVDb25maWcuYXBwLm5hbWUsCiAgICAgIGFwcExvZ286IHRoZW1lQ29uZmlnLmFwcC5sb2dvLAogICAgICAvLyBUZW1wbGF0ZSBSZWZzCiAgICAgIGxvZ2luRm9ybQogICAgfTsKICB9Cgp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;EACAA;IACA;IACA;IAEA;IACA;MAAAC;IAAA;IAEA;IAEA;IACA;IACA;;IAEA;MACA;MAEA;MAEAC,8DACAC,IADA,CACAC;QAAA;;QACA;QACAC;QACAA;UAAAC;UAAAC;QAAA;QACA;QACAF,6DALA,CAOA;QAEA;;QACAG;QACAP;MACA,CAbA,EAcAQ,KAdA,CAcAC;QACAF;QACAA;MACA,CAjBA,EALA,CAwBA;MACA;MACA;MACA;MAEA;MACA;MACA;MAEA;MACA;MACA;MACA;MACA;MACA;MAEA;MACA;MACA;MAEA;MACA;MAEA;MACA;MACA;MAEA;MACA;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CAhEA;;IAkEA;MACAG,KADA;MAGAC,iBAHA;MAIAC,KAJA;MAKAC,QALA;MAMAC,aANA;MAOAC;QACAC,aADA;QAEAC;MAFA,CAPA;MAWAC;QACAC,QADA;QAEAC;MAFA,CAXA;MAgBA;MACAC,6BAjBA;MAkBAC,6BAlBA;MAoBA;MACAC;IArBA;EAuBA;;AAvGA","names":["setup","router","signInWithEmailAndPassword","then","user","localStorage","action","subject","console","catch","error","logIn","isPasswordVisible","email","password","errorMessages","icons","mdiEyeOutline","mdiEyeOffOutline","validators","required","emailValidator","appName","appLogo","loginForm"],"sourceRoot":"src/views","sources":["Login.vue"],"sourcesContent":["<template>\n  <div class=\"auth-wrapper auth-v1\">\n    <div class=\"auth-inner\">\n      <v-card class=\"auth-card\">\n        <!-- logo -->\n        <v-card-title class=\"d-flex align-center justify-center py-7\">\n          <router-link\n            to=\"/\"\n            class=\"d-flex align-center\"\n          >\n            <v-img\n              :src=\"appLogo\"\n              max-height=\"30px\"\n              max-width=\"30px\"\n              alt=\"logo\"\n              contain\n              class=\"me-3 \"\n            ></v-img>\n\n            <h2 class=\"text-2xl font-weight-semibold\">\n              {{ appName }}\n            </h2>\n          </router-link>\n        </v-card-title>\n\n        <!-- login form -->\n        <v-card-text>\n          <v-form>\n            <v-text-field\n              id=\"email\"\n              v-model=\"email\"\n              outlined\n              label=\"Email\"\n              placeholder=\"\"\n              hide-details\n              class=\"mb-3\"\n            ></v-text-field>\n\n            <v-text-field\n              id=\"password\"\n              v-model=\"password\"\n              outlined\n              :type=\"isPasswordVisible ? 'text' : 'password'\"\n              label=\"Contraseña\"\n              placeholder=\"············\"\n              :append-icon=\"isPasswordVisible ? icons.mdiEyeOffOutline : icons.mdiEyeOutline\"\n              hide-details\n              @click:append=\"isPasswordVisible = !isPasswordVisible\"\n            ></v-text-field>\n\n            <!--  <div class=\"d-flex align-center justify-space-between flex-wrap\">\n              forgot link\n              <router-link\n                :to=\"{name:'auth-forgot-password-v1'}\"\n                class=\"mt-1\"\n              >\n                Forgot Password?\n              </router-link>\n            </div> -->\n\n            <v-btn\n              id=\"button_login\"\n              block\n              color=\"primary\"\n              class=\"mt-6\"\n              @click=\"logIn\"\n            >\n              Iniciar sesión\n            </v-btn>\n          </v-form>\n        </v-card-text>\n\n        <!-- create new account  -->\n        <v-card-text class=\"d-flex align-center justify-center flex-wrap mt-2\">\n          <span class=\"me-2\">\n            Nuevo en la plataforma?\n          </span>\n          <router-link :to=\"{name:'auth-register-v1'}\">\n            Crea una cuenta\n          </router-link>\n        </v-card-text>\n      </v-card>\n    </div>\n  </div>\n</template>\n\n<script>\n// eslint-disable-next-line object-curly-newline\nimport { useRouter } from '@core/utils'\nimport { emailValidator, required } from '@core/utils/validation'\nimport { mdiEyeOffOutline, mdiEyeOutline } from '@mdi/js'\nimport themeConfig from '@themeConfig'\nimport { getCurrentInstance, ref } from '@vue/composition-api'\nimport { uuid } from 'vue-uuid'\n\nimport { auth, signInWithEmailAndPassword } from '../firebase'\n\nexport default {\n  setup() {\n    // Template Ref\n    const loginForm = ref(null)\n\n    const vm = getCurrentInstance().proxy\n    const { router } = useRouter()\n\n    const isPasswordVisible = ref(false)\n\n    const email = ref('')\n    const password = ref('')\n    const errorMessages = ref([])\n\n    const logIn = async () => {\n      // const isFormValid = loginForm.value.validate()\n\n      // if (!isFormValid) return\n\n      signInWithEmailAndPassword(auth, email.value, password.value)\n        .then(user => {\n          // Set user's data in localStorage for UI/Other purpose\n          localStorage.setItem('userData', JSON.stringify(user))\n          localStorage.setItem('userAbility', JSON.stringify([{ action: 'manage', subject: 'all' }]))\n          const sessionId = uuid.v1()\n          localStorage.setItem('sessionId', JSON.stringify(sessionId))\n\n          // localStorage.setItem('accessToken', token)\n\n          // On success redirect to home\n          console.log(`User logged in: ${JSON.stringify(user?.user?.email)}`)\n          router.push('/home')\n        })\n        .catch(error => {\n          console.error('Oops, Unable to login!')\n          console.log('error : ', error)\n        })\n\n      // axios\n      //   .post('/auth/login', { email: email.value, password: password.value })\n      //   .then(response => {\n      //     const { accessToken } = response.data\n\n      //     // ? Set access token in localStorage so axios interceptor can use it\n      //     // Axios Interceptors: https://github.com/axios/axios#interceptors\n      //     localStorage.setItem('accessToken', accessToken)\n\n      //     return response\n      //   })\n      //   .then(() => {\n      //     axios.get('/auth/me').then(response => {\n      //       const { user } = response.data\n      //       const { ability: userAbility } = user\n\n      //       // Set user ability\n      //       // ? https://casl.js.org/v5/en/guide/intro#update-rules\n      //       vm.$ability.update(userAbility)\n\n      //       // Set user's ability in localStorage for Access Control\n      //       localStorage.setItem('userAbility', JSON.stringify(userAbility))\n\n      //       // We will store `userAbility` in localStorage separate from userData\n      //       // Hence, we are just removing it from user object\n      //       delete user.ability\n\n      //       // Set user's data in localStorage for UI/Other purpose\n      //       localStorage.setItem('userData', JSON.stringify(user))\n\n      //       // On success redirect to home\n      //       router.push('/')\n      //     })\n      //   })\n      //   .catch(error => {\n      //     // TODO: Next Update - Show notification\n      //     console.error('Oops, Unable to login!')\n      //     console.log('error :>> ', error.response)\n      //     errorMessages.value = error.response.data.error\n      //   })\n    }\n\n    return {\n      logIn,\n\n      isPasswordVisible,\n      email,\n      password,\n      errorMessages,\n      icons: {\n        mdiEyeOutline,\n        mdiEyeOffOutline,\n      },\n      validators: {\n        required,\n        emailValidator,\n      },\n\n      // themeConfig\n      appName: themeConfig.app.name,\n      appLogo: themeConfig.app.logo,\n\n      // Template Refs\n      loginForm,\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@core/preset/preset/pages/auth.scss';\n</style>\n"]}]}