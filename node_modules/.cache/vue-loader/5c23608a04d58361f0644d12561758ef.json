{"remainingRequest":"/Users/martadom/Desktop/TFM/FINAL/tfm/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/martadom/Desktop/TFM/FINAL/tfm/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/martadom/Desktop/TFM/FINAL/tfm/src/views/Login.vue","mtime":1693494846482},{"path":"/Users/martadom/Desktop/TFM/FINAL/tfm/node_modules/cache-loader/dist/cjs.js","mtime":1688895642525},{"path":"/Users/martadom/Desktop/TFM/FINAL/tfm/node_modules/babel-loader/lib/index.js","mtime":1688895642501},{"path":"/Users/martadom/Desktop/TFM/FINAL/tfm/node_modules/cache-loader/dist/cjs.js","mtime":1688895642525},{"path":"/Users/martadom/Desktop/TFM/FINAL/tfm/node_modules/vue-loader/lib/index.js","mtime":1688895654604}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBvYmplY3QtY3VybHktbmV3bGluZQppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICdAY29yZS91dGlscycKaW1wb3J0IHsgZW1haWxWYWxpZGF0b3IsIHJlcXVpcmVkIH0gZnJvbSAnQGNvcmUvdXRpbHMvdmFsaWRhdGlvbicKaW1wb3J0IHsgbWRpRXllT2ZmT3V0bGluZSwgbWRpRXllT3V0bGluZSB9IGZyb20gJ0BtZGkvanMnCmltcG9ydCB0aGVtZUNvbmZpZyBmcm9tICdAdGhlbWVDb25maWcnCmltcG9ydCB7IGdldEN1cnJlbnRJbnN0YW5jZSwgcmVmIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknCmltcG9ydCB7IHV1aWQgfSBmcm9tICd2dWUtdXVpZCcKCmltcG9ydCB7IGF1dGgsIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIH0gZnJvbSAnLi4vZmlyZWJhc2UnCgpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXAoKSB7CiAgICAvLyBUZW1wbGF0ZSBSZWYKICAgIGNvbnN0IGxvZ2luRm9ybSA9IHJlZihudWxsKQoKICAgIGNvbnN0IHZtID0gZ2V0Q3VycmVudEluc3RhbmNlKCkucHJveHkKICAgIGNvbnN0IHsgcm91dGVyIH0gPSB1c2VSb3V0ZXIoKQoKICAgIGNvbnN0IGlzUGFzc3dvcmRWaXNpYmxlID0gcmVmKGZhbHNlKQoKICAgIGNvbnN0IGVtYWlsID0gcmVmKCcnKQogICAgY29uc3QgcGFzc3dvcmQgPSByZWYoJycpCiAgICBjb25zdCBlcnJvck1lc3NhZ2VzID0gcmVmKFtdKQoKICAgIGNvbnN0IGxvZ0luID0gYXN5bmMgKCkgPT4gewogICAgICAvLyBjb25zdCBpc0Zvcm1WYWxpZCA9IGxvZ2luRm9ybS52YWx1ZS52YWxpZGF0ZSgpCgogICAgICAvLyBpZiAoIWlzRm9ybVZhbGlkKSByZXR1cm4KCiAgICAgIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLnZhbHVlLCBwYXNzd29yZC52YWx1ZSkKICAgICAgICAudGhlbih1c2VyID0+IHsKICAgICAgICAgIC8vIFNldCB1c2VyJ3MgZGF0YSBpbiBsb2NhbFN0b3JhZ2UgZm9yIFVJL090aGVyIHB1cnBvc2UKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyRGF0YScsIEpTT04uc3RyaW5naWZ5KHVzZXIpKQogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJBYmlsaXR5JywgSlNPTi5zdHJpbmdpZnkoW3sgYWN0aW9uOiAnbWFuYWdlJywgc3ViamVjdDogJ2FsbCcgfV0pKQogICAgICAgICAgY29uc3Qgc2Vzc2lvbklkID0gdXVpZC52MSgpCiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2Vzc2lvbklkJywgSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbklkKSkKCiAgICAgICAgICAvLyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzVG9rZW4nLCB0b2tlbikKCiAgICAgICAgICAvLyBPbiBzdWNjZXNzIHJlZGlyZWN0IHRvIGhvbWUKICAgICAgICAgIGNvbnNvbGUubG9nKGBVc2VyIGxvZ2dlZCBpbjogJHtKU09OLnN0cmluZ2lmeSh1c2VyPy51c2VyPy5lbWFpbCl9YCkKICAgICAgICAgIHJvdXRlci5wdXNoKCcvaG9tZScpCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcignT29wcywgVW5hYmxlIHRvIGxvZ2luIScpCiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3IgOiAnLCBlcnJvcikKICAgICAgICB9KQoKICAgICAgLy8gYXhpb3MKICAgICAgLy8gICAucG9zdCgnL2F1dGgvbG9naW4nLCB7IGVtYWlsOiBlbWFpbC52YWx1ZSwgcGFzc3dvcmQ6IHBhc3N3b3JkLnZhbHVlIH0pCiAgICAgIC8vICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAvLyAgICAgY29uc3QgeyBhY2Nlc3NUb2tlbiB9ID0gcmVzcG9uc2UuZGF0YQoKICAgICAgLy8gICAgIC8vID8gU2V0IGFjY2VzcyB0b2tlbiBpbiBsb2NhbFN0b3JhZ2Ugc28gYXhpb3MgaW50ZXJjZXB0b3IgY2FuIHVzZSBpdAogICAgICAvLyAgICAgLy8gQXhpb3MgSW50ZXJjZXB0b3JzOiBodHRwczovL2dpdGh1Yi5jb20vYXhpb3MvYXhpb3MjaW50ZXJjZXB0b3JzCiAgICAgIC8vICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzVG9rZW4nLCBhY2Nlc3NUb2tlbikKCiAgICAgIC8vICAgICByZXR1cm4gcmVzcG9uc2UKICAgICAgLy8gICB9KQogICAgICAvLyAgIC50aGVuKCgpID0+IHsKICAgICAgLy8gICAgIGF4aW9zLmdldCgnL2F1dGgvbWUnKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgLy8gICAgICAgY29uc3QgeyB1c2VyIH0gPSByZXNwb25zZS5kYXRhCiAgICAgIC8vICAgICAgIGNvbnN0IHsgYWJpbGl0eTogdXNlckFiaWxpdHkgfSA9IHVzZXIKCiAgICAgIC8vICAgICAgIC8vIFNldCB1c2VyIGFiaWxpdHkKICAgICAgLy8gICAgICAgLy8gPyBodHRwczovL2Nhc2wuanMub3JnL3Y1L2VuL2d1aWRlL2ludHJvI3VwZGF0ZS1ydWxlcwogICAgICAvLyAgICAgICB2bS4kYWJpbGl0eS51cGRhdGUodXNlckFiaWxpdHkpCgogICAgICAvLyAgICAgICAvLyBTZXQgdXNlcidzIGFiaWxpdHkgaW4gbG9jYWxTdG9yYWdlIGZvciBBY2Nlc3MgQ29udHJvbAogICAgICAvLyAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlckFiaWxpdHknLCBKU09OLnN0cmluZ2lmeSh1c2VyQWJpbGl0eSkpCgogICAgICAvLyAgICAgICAvLyBXZSB3aWxsIHN0b3JlIGB1c2VyQWJpbGl0eWAgaW4gbG9jYWxTdG9yYWdlIHNlcGFyYXRlIGZyb20gdXNlckRhdGEKICAgICAgLy8gICAgICAgLy8gSGVuY2UsIHdlIGFyZSBqdXN0IHJlbW92aW5nIGl0IGZyb20gdXNlciBvYmplY3QKICAgICAgLy8gICAgICAgZGVsZXRlIHVzZXIuYWJpbGl0eQoKICAgICAgLy8gICAgICAgLy8gU2V0IHVzZXIncyBkYXRhIGluIGxvY2FsU3RvcmFnZSBmb3IgVUkvT3RoZXIgcHVycG9zZQogICAgICAvLyAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlckRhdGEnLCBKU09OLnN0cmluZ2lmeSh1c2VyKSkKCiAgICAgIC8vICAgICAgIC8vIE9uIHN1Y2Nlc3MgcmVkaXJlY3QgdG8gaG9tZQogICAgICAvLyAgICAgICByb3V0ZXIucHVzaCgnLycpCiAgICAgIC8vICAgICB9KQogICAgICAvLyAgIH0pCiAgICAgIC8vICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgLy8gICAgIC8vIFRPRE86IE5leHQgVXBkYXRlIC0gU2hvdyBub3RpZmljYXRpb24KICAgICAgLy8gICAgIGNvbnNvbGUuZXJyb3IoJ09vcHMsIFVuYWJsZSB0byBsb2dpbiEnKQogICAgICAvLyAgICAgY29uc29sZS5sb2coJ2Vycm9yIDo+PiAnLCBlcnJvci5yZXNwb25zZSkKICAgICAgLy8gICAgIGVycm9yTWVzc2FnZXMudmFsdWUgPSBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yCiAgICAgIC8vICAgfSkKICAgIH0KCiAgICByZXR1cm4gewogICAgICBsb2dJbiwKCiAgICAgIGlzUGFzc3dvcmRWaXNpYmxlLAogICAgICBlbWFpbCwKICAgICAgcGFzc3dvcmQsCiAgICAgIGVycm9yTWVzc2FnZXMsCiAgICAgIGljb25zOiB7CiAgICAgICAgbWRpRXllT3V0bGluZSwKICAgICAgICBtZGlFeWVPZmZPdXRsaW5lLAogICAgICB9LAogICAgICB2YWxpZGF0b3JzOiB7CiAgICAgICAgcmVxdWlyZWQsCiAgICAgICAgZW1haWxWYWxpZGF0b3IsCiAgICAgIH0sCgogICAgICAvLyB0aGVtZUNvbmZpZwogICAgICBhcHBOYW1lOiB0aGVtZUNvbmZpZy5hcHAubmFtZSwKICAgICAgYXBwTG9nbzogdGhlbWVDb25maWcuYXBwLmxvZ28sCgogICAgICAvLyBUZW1wbGF0ZSBSZWZzCiAgICAgIGxvZ2luRm9ybSwKICAgIH0KICB9LAp9Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"auth-wrapper auth-v1\">\n    <div class=\"auth-inner\">\n      <v-card class=\"auth-card\">\n        <!-- logo -->\n        <v-card-title class=\"d-flex align-center justify-center py-7\">\n          <router-link\n            to=\"/\"\n            class=\"d-flex align-center\"\n          >\n            <v-img\n              :src=\"appLogo\"\n              max-height=\"30px\"\n              max-width=\"30px\"\n              alt=\"logo\"\n              contain\n              class=\"me-3 \"\n            ></v-img>\n\n            <h2 class=\"text-2xl font-weight-semibold\">\n              {{ appName }}\n            </h2>\n          </router-link>\n        </v-card-title>\n\n        <!-- login form -->\n        <v-card-text>\n          <v-form>\n            <v-text-field\n              id=\"email\"\n              v-model=\"email\"\n              outlined\n              label=\"Email\"\n              placeholder=\"\"\n              hide-details\n              class=\"mb-3\"\n            ></v-text-field>\n\n            <v-text-field\n              id=\"password\"\n              v-model=\"password\"\n              outlined\n              :type=\"isPasswordVisible ? 'text' : 'password'\"\n              label=\"Contraseña\"\n              placeholder=\"············\"\n              :append-icon=\"isPasswordVisible ? icons.mdiEyeOffOutline : icons.mdiEyeOutline\"\n              hide-details\n              @click:append=\"isPasswordVisible = !isPasswordVisible\"\n            ></v-text-field>\n\n            <!--  <div class=\"d-flex align-center justify-space-between flex-wrap\">\n              forgot link\n              <router-link\n                :to=\"{name:'auth-forgot-password-v1'}\"\n                class=\"mt-1\"\n              >\n                Forgot Password?\n              </router-link>\n            </div> -->\n\n            <v-btn\n              id=\"button_login\"\n              block\n              color=\"primary\"\n              class=\"mt-6\"\n              @click=\"logIn\"\n            >\n              Iniciar sesión\n            </v-btn>\n          </v-form>\n        </v-card-text>\n\n        <!-- create new account  -->\n        <v-card-text class=\"d-flex align-center justify-center flex-wrap mt-2\">\n          <span class=\"me-2\">\n            Nuevo en la plataforma?\n          </span>\n          <router-link :to=\"{name:'auth-register-v1'}\">\n            Crea una cuenta\n          </router-link>\n        </v-card-text>\n      </v-card>\n    </div>\n  </div>\n</template>\n\n<script>\n// eslint-disable-next-line object-curly-newline\nimport { useRouter } from '@core/utils'\nimport { emailValidator, required } from '@core/utils/validation'\nimport { mdiEyeOffOutline, mdiEyeOutline } from '@mdi/js'\nimport themeConfig from '@themeConfig'\nimport { getCurrentInstance, ref } from '@vue/composition-api'\nimport { uuid } from 'vue-uuid'\n\nimport { auth, signInWithEmailAndPassword } from '../firebase'\n\nexport default {\n  setup() {\n    // Template Ref\n    const loginForm = ref(null)\n\n    const vm = getCurrentInstance().proxy\n    const { router } = useRouter()\n\n    const isPasswordVisible = ref(false)\n\n    const email = ref('')\n    const password = ref('')\n    const errorMessages = ref([])\n\n    const logIn = async () => {\n      // const isFormValid = loginForm.value.validate()\n\n      // if (!isFormValid) return\n\n      signInWithEmailAndPassword(auth, email.value, password.value)\n        .then(user => {\n          // Set user's data in localStorage for UI/Other purpose\n          localStorage.setItem('userData', JSON.stringify(user))\n          localStorage.setItem('userAbility', JSON.stringify([{ action: 'manage', subject: 'all' }]))\n          const sessionId = uuid.v1()\n          localStorage.setItem('sessionId', JSON.stringify(sessionId))\n\n          // localStorage.setItem('accessToken', token)\n\n          // On success redirect to home\n          console.log(`User logged in: ${JSON.stringify(user?.user?.email)}`)\n          router.push('/home')\n        })\n        .catch(error => {\n          console.error('Oops, Unable to login!')\n          console.log('error : ', error)\n        })\n\n      // axios\n      //   .post('/auth/login', { email: email.value, password: password.value })\n      //   .then(response => {\n      //     const { accessToken } = response.data\n\n      //     // ? Set access token in localStorage so axios interceptor can use it\n      //     // Axios Interceptors: https://github.com/axios/axios#interceptors\n      //     localStorage.setItem('accessToken', accessToken)\n\n      //     return response\n      //   })\n      //   .then(() => {\n      //     axios.get('/auth/me').then(response => {\n      //       const { user } = response.data\n      //       const { ability: userAbility } = user\n\n      //       // Set user ability\n      //       // ? https://casl.js.org/v5/en/guide/intro#update-rules\n      //       vm.$ability.update(userAbility)\n\n      //       // Set user's ability in localStorage for Access Control\n      //       localStorage.setItem('userAbility', JSON.stringify(userAbility))\n\n      //       // We will store `userAbility` in localStorage separate from userData\n      //       // Hence, we are just removing it from user object\n      //       delete user.ability\n\n      //       // Set user's data in localStorage for UI/Other purpose\n      //       localStorage.setItem('userData', JSON.stringify(user))\n\n      //       // On success redirect to home\n      //       router.push('/')\n      //     })\n      //   })\n      //   .catch(error => {\n      //     // TODO: Next Update - Show notification\n      //     console.error('Oops, Unable to login!')\n      //     console.log('error :>> ', error.response)\n      //     errorMessages.value = error.response.data.error\n      //   })\n    }\n\n    return {\n      logIn,\n\n      isPasswordVisible,\n      email,\n      password,\n      errorMessages,\n      icons: {\n        mdiEyeOutline,\n        mdiEyeOffOutline,\n      },\n      validators: {\n        required,\n        emailValidator,\n      },\n\n      // themeConfig\n      appName: themeConfig.app.name,\n      appLogo: themeConfig.app.logo,\n\n      // Template Refs\n      loginForm,\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@core/preset/preset/pages/auth.scss';\n</style>\n"]}]}